[uwsgi]
workdir = /www/project_name

pythonpath=%(workdir)/src
env=DJANGO_SETTINGS_MODULE=project.settings.base
module=project.wsgi:application
check-static-docroot=%(workdir)/var/htdocs

master = true
harakiri = 30
max-requests = 5000
vacuum = true
worker-reload-mercy = 60

spooler = %(workdir)/var/spooler
spooler-processes=2
spooler-max-tasks=50
import = project.tasks

need-app = true
;py-callos-afterfork = true

logto = %(workdir)/var/logs/uwsgi.log
log-maxsize=20971520

[prod]
ini = :uwsgi
disable-logging=true
chmod-socket = 666
#daemonize=%(workdir)/var/logs/uwsgi.log
socket=%(workdir)/var/uwsgi.sock
pidfile=%(workdir)/var/uwsgi.pid
ignore-sigpipe=true
ignore-write-errors=true
disable-write-exception=true

enable-threads = true
threads=5

workers = 20
cheaper-algo = spare2
cheaper = 2
cheaper-initial = 4
cheaper-step = 1
cheaper-idle = 60

[dev]
http = 127.0.0.1:8000
disable-logging=false
ini = :uwsgi
py-autoreload=1


[uwsgi_daemon]
ini = :prod
